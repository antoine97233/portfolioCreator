{% extends 'base.html.twig' %}

{% block title %}PortFolioCreator - All users
{% endblock %}

{% block body %}


	<div class="row mt-4">

		<div class="col-12 col-lg-3">
			<div class="rounded h-100">

				<div class="d-grid pb-2 mt-2 mb-2">
					<a class="btn btn-success btn-sm shadow-sm" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="true" aria-controls="collapseExample">
						<i class="fa-solid fa-filter"></i>
					</a>

				</div>

				<p class="text-secondary text-center">
					<em>
						<span class="text-success">{{usersTotal}}</span>
						result(s)
					</em>
				</p>

				<div class="collapse show show-md mb-5" id="collapseExample">
					<ul class="list-group">
						<li class="list-group-item">

							<h2 class="h5 text-center text-success">Select by skill</h2>


						</li>
						{% if selectedSkills %}
							<form method="get" action="{{ path('users') }}">
								<li class="list-group-item text-center">
									<button type="submit" class="btn btn-sm  btn-secondary shadow-sm" name="removeFilter" style="min-width:150px">Remove Filter</button>
								</li>
							</form>
						{% endif %}

						<form method="get" action="{{ path('users') }}">
							{% for skill in skills %}
								<li class="list-group-item d-flex justify-content-between">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="selectedSkills[]" value="{{ skill.id }}" id="flexCheckDefault" {% if skill.id in selectedSkills %} checked {% endif %}>
										<label class="form-check-label" for="flexCheckDefault">
											{{ skill.title }}
										</label>
									</div>
									<div>
										<span class="ml-2 badge text-bg-secondary rounded-pill">{{ skill.countUsers }}</span>
									</div>
								</li>
							{% endfor %}

							<li class="list-group-item">
								<div class="form-check form-switch text-center">
									<input class="form-check-input" type="checkbox" id="isUserAvalaible" name="isUserAvalaible" {% if isOpenToWork %} checked {% endif %}>
									<label class="form-check-label" for="isUserAvalaible">Open to Work</label>
								</div>
							</li>

							<li class="list-group-item text-center">
								<button type="submit" class="btn btn-success">Apply Filter</button>
							</li>
						</form>


					</ul>
				</div>

			</div>
		</div>


		<div class="col-12 col-lg-9">
			<div class="flex row ">
				{% if users is not empty %}

					{% for user in users %}
						{{ include('public/_userCard.html.twig') }}

					{% endfor %}
				{% endif %}
			</div>

			<div class="pagination d-flex justify-content-center mt-4 mb-4">
				{{ knp_pagination_render(users) }}
			</div>


		</div>


	{% endblock %}
